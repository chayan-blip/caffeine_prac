apply plugin: 'com.github.ben-manes.versions'
apply plugin: 'java'

group = 'com.github.ben-manes'
sourceCompatibility = '1.8'

buildscript {
  repositories {
    jcenter()
  }

  dependencies {
    classpath 'com.github.ben-manes:gradle-versions-plugin:0.6'
  }
}

repositories {
  mavenCentral()
}

configurations.testCompile.resolutionStrategy.componentSelection {
  all { ComponentSelection selection ->
    if (selection.candidate.group == 'junit') {
      selection.reject('reject optional transitives')
    }
  }
}

dependencies {
  def guava = '18.0'

  // unit testing
  testCompile 'org.mockito:mockito-all:1.10.15'
  testCompile 'org.assertj:assertj-core:1.7.0'
  testCompile 'org.assertj:assertj-guava:1.3.0'
  testCompile 'com.jayway.awaitility:awaitility:1.6.3'
  testCompile dependencies.create('org.testng:testng:6.8.8') {
    exclude group: 'junit'
  }
  testCompile "com.google.guava:guava-testlib:${guava}"

  // benchmarking
  testCompile 'org.openjdk.jmh:jmh-core:1.3.4'
  testCompile "com.google.guava:guava:${guava}"
  testCompile 'com.googlecode.concurrentlinkedhashmap:concurrentlinkedhashmap-lru:1.4'
}

test {
  useTestNG()
}
